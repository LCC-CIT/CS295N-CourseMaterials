<!DOCTYPE html><html>  <head>    <meta http-equiv="content-type" content="text/html; charset=UTF-8">    <title>Week 8, Day 1, Linq +Azure</title>    <style type="text/css">body {  font-family: "Arial", "Helvetica", "sans-serif";}footer {	font-size:smaller;	font-variant:small-caps;}#week10 {  background-color: #f8ff2e;}code {  display:block;  font-size: larger;  background-color: lightgoldenrodyellow;  max-height:450px;  width:85%;  overflow:scroll;  margin:0.5%;}      ul {   margin:0.5%;}      h2, h3, h4 {   display:inline;}      .exercise {  background-color: #c6ffe2;}</style> </head>  <body> <b>CS295N Web Development 1: ASP.NET </b><br>    <b> </b>    <header>      <div>Brian Bird</div>      <h1> <i><b>More EF, LINQ and Publishing to Azure </b></i></h1>      <b>Where we are </b>      <table style="width: 807px; height: 127px;" border="1">        <tbody>          <tr>            <td id="week01">1. Intro to MVC</td>            <td id="week06">6. Unit Testing and Repositories</td>          </tr>          <tr>            <td id="week02">2. Domain Modeling</td>            <td id="week07">7. Entity Framework (EF)</td>          </tr>          <tr>            <td id="week03">3. C# Review / Advanced C# for MVC</td>            <td id="week08">8. More on EF + Publishing to Azure</td>          </tr>          <tr>            <td id="week04">4. Razor Views and Tag Helpers</td>            <td id="week09">9. LINQ</td>          </tr>          <tr>            <td id="week05">5. Azure, Web Dev Tools and Debugging</td>            <td id="week10">10. Validation</td>          </tr>        </tbody>      </table>      <br>      <h2><b>Contents</b></h2>      <div>        <ul>          <b>            <li><a href="#topic1">Introduction</a></li>            <li><a href="#topic2">Review - LINQ </a></li>            <li><a href="#topic3a">Validation</a></li>            <li><a href="#topic6">Examples</a></li>            <li><a href="#topic7">References</a></li>          </b>        </ul>      </div>    </header>    <br>    <hr><br>    <section>      <article id="topic1">        <h2>Introduction</h2>        <ul>          <li>Announcements            <ul>              <li><a href="http://openeugene.org" target="_blank">Open Eugene                  Festival</a> </li>            </ul>          </li>        </ul>        <ul>          <li>Discuss questions about lab 8 - Seed data and publishing to Azure            with a Db</li>          <li>Review lab due dates on Moodle - lab 9 will be due this week.</li>          <li>Term Project - Presentations on Monday at class time</li>        </ul>        <p>We will finish up last week's topic of validation.</p>        <ul>        </ul>      </article>      <hr><br>      <article id="topic4a">        <h2>Review</h2>        <p><b><u>LINQ</u></b></p>        <article id="topic1" style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; text-decoration: none;">          <p><u><b>C# Attributes</b></u></p>          <ul>            <ul>              <ul>              </ul>            </ul>            <li>Programming Guide:<span class="Apple-converted-space">&nbsp;</span><a                href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/attributes/">C#
                Attributes</a></li>            <li>Attributes are a means of associating metadata with code</li>            <ul>              <li>Metadata is additional information about types defined in your                program (and remember that classes are types).</li>              <li>Attributes are declarative.</li>              <li>Attributes can be applied to assemblies (think DLLs), classes,                methods, and properties.<br>                <code style="font-size: larger; background-color: lightgoldenrodyellow;">[BindProperty]<br>                  public Movie Movie { get; set; }</code></li>              <li>Attributes can accept arguments.<br>                <code style="font-size: larger; background-color: lightgoldenrodyellow;">[attribute(positional_parameters,
                  name_parameter = value, ...)]</code></li>              <ul>                <li>Example using positional parameters:<br>                  <code style="font-size: larger; background-color: lightgoldenrodyellow;">[ObsoleteAttribute("This
                    method is deprecated", false)]<br>                    public void AnOutdatedMethod()</code></li>              </ul>              <ul>                <li>Example using named parameters:<br>                  <code style="font-size: larger; background-color: lightgoldenrodyellow;">[ObsoleteAttribute(Message
                    = "This method is deprecated", IsError = false)]<br>                    public void AnOutdatedMethod()</code></li>                <li>API Reference:<span class="Apple-converted-space">&nbsp;</span><a                    href="https://docs.microsoft.com/en-us/dotnet/api/system.obsoleteattribute?view=netcore-2.0">ObsoleteAttribute</a></li>              </ul>              <ul>              </ul>              <ul>              </ul>            </ul>          </ul>          <p></p>          <code style="font-size: larger; background-color: lightgoldenrodyellow;"></code></article>        <p></p>        <ul>        </ul>        <ul>        </ul>      </article>      <hr><br>      <h2> Validation </h2>      <br>      <ul>        <li>Validation is expected in the browser (for good UX), required on the          server (for security)</li>        <li>Good UX design provides a way for users to easily fix entry errors</li>        <li>In ASP.NET MVC, validation is done on the models</li>        <li>Implemented using C# attributes – in MVC they are called <i>data            annotations</i></li>      </ul>      <p style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; text-decoration: none;"><u><b>Data
            Annotations<span class="Apple-converted-space">&nbsp;</span></b></u></p>      <ul style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; text-decoration: none;">        <li>API Reference:<span class="Apple-converted-space">&nbsp;</span><a href="https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.dataannotations?view=netcore-2.0">System.ComponentModel.DataAnnotations
            Namespace</a></li>        <ul>          <li>Most of these attributes are for validation</li>        </ul>      </ul>      <u><br>        <b>Validation Using Data Annotations</b></u><br>      <b> </b><br>      <ul style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; text-decoration: none;">        <li>Validation is specified on the data model and is then enforced in          multiple places:</li>        <ul>          <li>In the database</li>          <li>In HTML form elements in the browser using jQuery validate</li>          <li>In HTTP Requests processed on the server (in case JavaScript is            disabled in the browser)</li>          <ul>            <li>Add a break-point to a request method to test this</li>            <li>Test this again after<span class="Apple-converted-space">&nbsp;</span><a                href="https://www.wikihow.com/Disable-JavaScript">disabling
                JavaScript</a></li>          </ul>        </ul>        <li>Validation Example:<br>          <code style="font-size: larger; background-color: lightgoldenrodyellow;">[StringLength(60,
            MinimumLength = 3)]<br>            [Required]<br>            public string Title { get; set; }</code></li>      </ul>      <br>      <u>Validation in the Controller</u><br>      <ul>        <li> Explicit Validation: You add the validation code to a controller          method yourself          <ul>            <li>Example: <code>if (string.IsNullOrEmpty(appt.ClientName)) {<br>                &nbsp;&nbsp;&nbsp;&nbsp;                ModelState.AddModelError(nameof(appt.ClientName), "Please enter                your name");</code> </li>          </ul>        </li>        <ul>          <li>Model State Dictionary            <ul>              <ul>              </ul>              <li> AddModelError(property, message) This method is used to                record a model validation error for the specified property.</li>              <ul>              </ul>              <li>GetValidationState(property) This method is used to determine                whether there are model validation errors for a specific                property, expressed as a value from the ModelValidationState                enumeration.                <ul>                  <li>Unvalidated This value means that no validation has been                    performed on the model property, usually because there was                    no value in the request that corresponded to the property                    name.</li>                  <li>Valid This value means that the request value associated                    with the property is valid.</li>                  <li>Invalid This value means that the request value associated                    with the property is invalid and should not be used.</li>                  <li>Skipped This value means that the model property has not                    been processed, which usually means that there have been so                    many validation errors that there is no point continuing to                    perform validation checks.</li>                </ul>              </li>              <ul>              </ul>              <li>IsValid This property returns true if all the model properties                are valid and returns false otherwise.</li>              <ul>              </ul>            </ul>          </li>        </ul>      </ul>      <u> Displaying Validation Errors in the View</u><br>      <br>      <ul>        <li>Tag Helpers that display validation errors</li>        <ul>          <li>Summary<br>            <code>≈&lt;div asp-validation-summary="ModelOnly"              class="text-danger"&gt;&lt;/div&gt;</code></li>        </ul>        <ul>          <li>Individual field<br>            <code>&lt;label asp-for="ClientName"&gt;Your name:&lt;/label&gt;<br>              &lt;div&gt;&lt;span asp-validation-for="ClientName"              class="text-danger"&gt;&lt;/span&gt;&lt;/div&gt;<br>              &lt;input asp-for="ClientName" class="form-control" /&gt;</code></li>        </ul>      </ul>      <br>      <u>Discussion<br>        <br>      </u> All non-nullable model fields are required by default. <br>      Make fields nullable by adding ? – this will also make them nullable in      the database.<br>      <br>      Hidden fields:They are used to hold the entity ID so that it is sent back      with the post data. Models that are sent to the view aren’t kept in memory      and can’t automatically be posted with all the original data in them. Why?      (Statelessness of HTTP)<br>      <br>      Updating edited fields. db.State (entity)<br>      <br>      <hr> <br>      <article id="topic6">        <h2>Examples</h2>        <br>        <ul>          <li> <a href="https://github.com/ProfBird/CS295N-Demos/tree/master/LinqDemo"              target="_blank">Instructor's
              LINQ Demo</a> </li>        </ul>      </article>      <br>      <hr> <br>      <article id="topic8">        <h2>References</h2>        <ul>          <li>Textbook - <span style="font-style: italic;">Pro ASP.NET Core MVC              2.0</span>, Adam Freeman, Apress, 2017.<br>            Ch. 12 "Sports Store: Security and Deployment", section titled,<br>            "<b>Deploying the Application</b>" (page 334), with sub-sections:            <ul>              <li>Creating the Databases </li>              <li>Preparing the Application </li>              <li>Applying the Database Migrations </li>              <li>Managing Database Seeding&nbsp;</li>              <li>Deploying the Application</li>            </ul>          </li>          <li><a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/publish-to-azure-webapp-using-vs?view=aspnetcore-2.1"              target="_blank">Publish
              an ASP.NET Core app to Azure with Visual Studio</a></li>          <li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/linq/" target="_blank">Language
              Integrated Query (LINQ)</a></li>          <li><a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/search?view=aspnetcore-2.0"              target="_blank">Add
              search to an ASP.NET Core MVC app (Movie app)</a></li>          <li><a href="https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/sort-filter-page?view=aspnetcore-2.0"              target="_blank">ASP.NET
              Core MVC with EF Core - Sort, Filter, Paging (Contoso University              app)</a></li>        </ul>      </article>    </section>    <footer>      <hr style="width: 100%; height: 2px;"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img          alt="Creative Commons License"          style="border-width:0"          src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>      <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">ASP.NET        Core MVC Lecture Notes</span> by <a xmlns:cc="http://creativecommons.org/ns#"        href="https://birdsbits.blog"        property="cc:attributionName"        rel="cc:attributionURL">Brian
        Bird</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
        Commons Attribution-ShareAlike 4.0 International License</a>. </footer>    <hr>  </body></html>